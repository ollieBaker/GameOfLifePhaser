!function(){"use strict";function e(){}e.prototype={preload:function(){this.load.image("preloader","assets/preloader.gif")},create:function(){this.game.input.maxPointers=1,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=480,this.game.scale.minHeight=260,this.game.scale.maxWidth=640,this.game.scale.maxHeight=480,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.enterIncorrectOrientation.add(this.handleIncorrect),this.game.scale.leaveIncorrectOrientation.add(this.handleCorrect)),this.game.state.start("preloader")},handleIncorrect:function(){document.getElementById("orientation").style.display="block"},handleCorrect:function(){document.getElementById("orientation").style.display="none"}},window.gameoflifephaser=window.gameoflifephaser||{},window.gameoflifephaser.Boot=e}();var Cell=function(e,t,i,s){Phaser.Image.call(this,e,t*s,i*s,"shapes","Square"),this.width=this.height=s,this.game=e,this.isAlive=!1,this.willBeAlive=!1,this.visible=!1,Math.random()<.5&&(this.isAlive=!0,this.willBeAlive=!0,this.visible=!0),this.game.add.existing(this)};Cell.prototype=Object.create(Phaser.Image.prototype),Cell.prototype.constructor=Cell,Cell.prototype.reset=function(){this.isAlive=!1,this.willBeAlive=!1,this.visible=!1,Math.random()<.5&&(this.isAlive=!0,this.willBeAlive=!0,this.visible=!0)},Cell.prototype.update=function(){},Cell.prototype.setState=function(){this.willBeAlive?(this.willBeAlive=!1,this.isAlive=!0):(this.willBeAlive=!1,this.isAlive=!1)},Cell.prototype.updateDisplay=function(){this.willBeAlive?this.visible=!0:this.visible=!1},Cell.prototype.setNextState=function(e){3===e?this.willBeAlive=!0:2===e&&this.isAlive?this.willBeAlive=!0:this.willBeAlive=!1},function(){"use strict";function e(){}e.prototype={create:function(){this.isRunning=!1,this.CELL_SIZE=4,this.GRID_SIZE=Math.floor(this.game.height/this.CELL_SIZE),this.grid=[],this.neighbours=[];var e=function(e,t){return{x:e,y:t}};this.neighbours.push(new e(-1,-1)),this.neighbours.push(new e(0,-1)),this.neighbours.push(new e(1,-1)),this.neighbours.push(new e(-1,0)),this.neighbours.push(new e(1,0)),this.neighbours.push(new e(-1,1)),this.neighbours.push(new e(0,1)),this.neighbours.push(new e(1,1)),this.offsetX=(this.game.width-this.GRID_SIZE*this.CELL_SIZE)/2,this.xPop=0,this.yPop=0;var t=this.game.time.create(!1);t.onComplete.addOnce(function(){this.addEventListeners(),this.isRunning=!0},this),t.repeat(1/60,this.GRID_SIZE,this.populateGrid,this),t.start()},populateGrid:function(){for(var e=0;e<=this.GRID_SIZE;e++)if(this.xPop<this.GRID_SIZE){var t=new Cell(this.game,this.xPop,this.yPop,this.CELL_SIZE);t.x+=this.offsetX,this.grid[this.xPop*this.GRID_SIZE+this.yPop]=t,this.xPop++}else this.xPop=0,this.yPop++},addEventListeners:function(){this.input.onDown.add(this.togglePause,this);var e=document.getElementById("restartBtn");e.onclick=this.restart.bind(this);var t=document.getElementById("pauseBtn");t.onclick=this.togglePause.bind(this)},update:function(){var e=this.GRID_SIZE;if(this.isRunning){var t,i,s;for(i=0;e>i;i++)for(s=0;e>s;s++)t=this.grid[i*e+s],this.check(t,i,s),t.updateDisplay();for(i=0;e>i;i++)for(s=0;e>s;s++)t=this.grid[i*e+s],t.setState()}},check:function(e,t,i){for(var s=0,n=0;8>n&&!(this.retrieve(t+this.neighbours[n].x,i+this.neighbours[n].y)&&(s++,s>3));n++);e.setNextState(s)},retrieve:function(e,t){var i=!1,s=this.GRID_SIZE;return e>=0&&t>=0&&s>e&&s>t&&(i=this.grid[e*s+t].isAlive),i},restart:function(){for(var e=this.GRID_SIZE,t=0;e>t;t++)for(var i=0;e>i;i++){var s=this.grid[t*e+i];s.reset()}},togglePause:function(){var e=document.getElementById("pauseBtn");e.innerHTML=this.isRunning?"Play":"Pause",this.isRunning=!this.isRunning}},window.gameoflifephaser=window.gameoflifephaser||{},window.gameoflifephaser.Game=e}(),window.addEventListener("load",function(){"use strict";var e=window.gameoflifephaser,t=window.screen.height<window.screen.width?window.screen.height:window.screen.width,i=new Phaser.Game(640,480>t?t:480,Phaser.AUTO,"gameoflifephaser-game");i.state.add("boot",e.Boot),i.state.add("preloader",e.Preloader),i.state.add("menu",e.Menu),i.state.add("game",e.Game),i.state.start("boot")},!1),function(){"use strict";function e(){}e.prototype={create:function(){this.titleTxt=this.add.text(.5*this.game.width,.5*this.game.height,"This is an implementation of\nConway's Game of Life \n using JavaScript and Phaser",{font:"32px Arial",fill:"#ffffff",align:"center"}),this.titleTxt.anchor.set(.5),this.input.onDown.add(this.onDown,this)},update:function(){},onDown:function(){this.game.add.tween(this.titleTxt).to({alpha:0},700,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){this.game.state.start("game")},this)}},window.gameoflifephaser=window.gameoflifephaser||{},window.gameoflifephaser.Menu=e}(),function(){"use strict";function e(){this.asset=null,this.ready=!1}e.prototype={preload:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources("assets/"),this.ready=!0},loadResources:function(e){this.game.load.atlas("shapes",e+"shapes.png",e+"shapes.json")},create:function(){},update:function(){this.ready&&this.game.state.start("menu")},onLoadComplete:function(){this.ready=!0}},window.gameoflifephaser=window.gameoflifephaser||{},window.gameoflifephaser.Preloader=e}();